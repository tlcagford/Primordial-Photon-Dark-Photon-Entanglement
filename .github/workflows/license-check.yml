name: License Check

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

permissions:
  contents: write  # allow the workflow to push or commit

jobs:
  license-check:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3
      with:
        fetch-depth: 0
        persist-credentials: true

    - name: Verify LICENSE files exist
      run: |
        if [ ! -f LICENSES/APACHE-2.0.txt ] && [ ! -f LICENSES/CC-BY-4.0.txt ]; then
          echo "ERROR: Dual-license files missing."
          exit 1
        fi
        echo "Found license files."

    # Optionally add a badge update step or other logic
